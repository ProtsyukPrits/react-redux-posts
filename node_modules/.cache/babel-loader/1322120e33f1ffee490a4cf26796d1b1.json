{"ast":null,"code":"import _slicedToArray from \"/home/dmytro/react-redux-posts/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"/home/dmytro/react-redux-posts/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _createClass from \"/home/dmytro/react-redux-posts/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/home/dmytro/react-redux-posts/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _defineProperty from \"/home/dmytro/react-redux-posts/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\n// src/use-descendant.ts\nimport { createContext } from \"@chakra-ui/react-context\";\nimport { mergeRefs } from \"@chakra-ui/react-use-merge-refs\";\nimport { useRef, useState } from \"react\"; // src/utils.ts\n\nimport { useEffect, useLayoutEffect } from \"react\";\n\nfunction sortNodes(nodes) {\n  return nodes.sort(function (a, b) {\n    var compare = a.compareDocumentPosition(b);\n\n    if (compare & Node.DOCUMENT_POSITION_FOLLOWING || compare & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n      return -1;\n    }\n\n    if (compare & Node.DOCUMENT_POSITION_PRECEDING || compare & Node.DOCUMENT_POSITION_CONTAINS) {\n      return 1;\n    }\n\n    if (compare & Node.DOCUMENT_POSITION_DISCONNECTED || compare & Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC) {\n      throw Error(\"Cannot sort the given nodes.\");\n    } else {\n      return 0;\n    }\n  });\n}\n\nvar isElement = function isElement(el) {\n  return typeof el == \"object\" && \"nodeType\" in el && el.nodeType === Node.ELEMENT_NODE;\n};\n\nfunction getNextIndex(current, max, loop) {\n  var next = current + 1;\n  if (loop && next >= max) next = 0;\n  return next;\n}\n\nfunction getPrevIndex(current, max, loop) {\n  var next = current - 1;\n  if (loop && next < 0) next = max;\n  return next;\n}\n\nvar useSafeLayoutEffect = typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\n\nvar cast = function cast(value) {\n  return value;\n}; // src/descendant.ts\n\n\nvar DescendantsManager = /*#__PURE__*/_createClass(function DescendantsManager() {\n  var _this = this;\n\n  _classCallCheck(this, DescendantsManager);\n\n  _defineProperty(this, \"descendants\", /* @__PURE__ */new Map());\n\n  _defineProperty(this, \"register\", function (nodeOrOptions) {\n    if (nodeOrOptions == null) return;\n\n    if (isElement(nodeOrOptions)) {\n      return _this.registerNode(nodeOrOptions);\n    }\n\n    return function (node) {\n      _this.registerNode(node, nodeOrOptions);\n    };\n  });\n\n  _defineProperty(this, \"unregister\", function (node) {\n    _this.descendants.delete(node);\n\n    var sorted = sortNodes(Array.from(_this.descendants.keys()));\n\n    _this.assignIndex(sorted);\n  });\n\n  _defineProperty(this, \"destroy\", function () {\n    _this.descendants.clear();\n  });\n\n  _defineProperty(this, \"assignIndex\", function (descendants) {\n    _this.descendants.forEach(function (descendant) {\n      var index = descendants.indexOf(descendant.node);\n      descendant.index = index;\n      descendant.node.dataset[\"index\"] = descendant.index.toString();\n    });\n  });\n\n  _defineProperty(this, \"count\", function () {\n    return _this.descendants.size;\n  });\n\n  _defineProperty(this, \"enabledCount\", function () {\n    return _this.enabledValues().length;\n  });\n\n  _defineProperty(this, \"values\", function () {\n    var values = Array.from(_this.descendants.values());\n    return values.sort(function (a, b) {\n      return a.index - b.index;\n    });\n  });\n\n  _defineProperty(this, \"enabledValues\", function () {\n    return _this.values().filter(function (descendant) {\n      return !descendant.disabled;\n    });\n  });\n\n  _defineProperty(this, \"item\", function (index) {\n    if (_this.count() === 0) return void 0;\n    return _this.values()[index];\n  });\n\n  _defineProperty(this, \"enabledItem\", function (index) {\n    if (_this.enabledCount() === 0) return void 0;\n    return _this.enabledValues()[index];\n  });\n\n  _defineProperty(this, \"first\", function () {\n    return _this.item(0);\n  });\n\n  _defineProperty(this, \"firstEnabled\", function () {\n    return _this.enabledItem(0);\n  });\n\n  _defineProperty(this, \"last\", function () {\n    return _this.item(_this.descendants.size - 1);\n  });\n\n  _defineProperty(this, \"lastEnabled\", function () {\n    var lastIndex = _this.enabledValues().length - 1;\n    return _this.enabledItem(lastIndex);\n  });\n\n  _defineProperty(this, \"indexOf\", function (node) {\n    var _ref;\n\n    var _a;\n\n    if (!node) return -1;\n    return (_ref = (_a = _this.descendants.get(node)) == null ? void 0 : _a.index) !== null && _ref !== void 0 ? _ref : -1;\n  });\n\n  _defineProperty(this, \"enabledIndexOf\", function (node) {\n    if (node == null) return -1;\n    return _this.enabledValues().findIndex(function (i) {\n      return i.node.isSameNode(node);\n    });\n  });\n\n  _defineProperty(this, \"next\", function (index) {\n    var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var next = getNextIndex(index, _this.count(), loop);\n    return _this.item(next);\n  });\n\n  _defineProperty(this, \"nextEnabled\", function (index) {\n    var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    var item = _this.item(index);\n\n    if (!item) return;\n\n    var enabledIndex = _this.enabledIndexOf(item.node);\n\n    var nextEnabledIndex = getNextIndex(enabledIndex, _this.enabledCount(), loop);\n    return _this.enabledItem(nextEnabledIndex);\n  });\n\n  _defineProperty(this, \"prev\", function (index) {\n    var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var prev = getPrevIndex(index, _this.count() - 1, loop);\n    return _this.item(prev);\n  });\n\n  _defineProperty(this, \"prevEnabled\", function (index) {\n    var loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    var item = _this.item(index);\n\n    if (!item) return;\n\n    var enabledIndex = _this.enabledIndexOf(item.node);\n\n    var prevEnabledIndex = getPrevIndex(enabledIndex, _this.enabledCount() - 1, loop);\n    return _this.enabledItem(prevEnabledIndex);\n  });\n\n  _defineProperty(this, \"registerNode\", function (node, options) {\n    if (!node || _this.descendants.has(node)) return;\n    var keys = Array.from(_this.descendants.keys()).concat(node);\n    var sorted = sortNodes(keys);\n\n    if (options == null ? void 0 : options.disabled) {\n      options.disabled = !!options.disabled;\n    }\n\n    var descendant = _objectSpread({\n      node: node,\n      index: -1\n    }, options);\n\n    _this.descendants.set(node, descendant);\n\n    _this.assignIndex(sorted);\n  });\n}); // src/use-descendant.ts\n\n\nfunction useDescendants() {\n  var descendants = useRef(new DescendantsManager());\n  useSafeLayoutEffect(function () {\n    return function () {\n      return descendants.current.destroy();\n    };\n  });\n  return descendants.current;\n}\n\nvar _createContext = createContext({\n  name: \"DescendantsProvider\",\n  errorMessage: \"useDescendantsContext must be used within DescendantsProvider\"\n}),\n    _createContext2 = _slicedToArray(_createContext, 2),\n    DescendantsContextProvider = _createContext2[0],\n    useDescendantsContext = _createContext2[1];\n\nfunction useDescendant(options) {\n  var descendants = useDescendantsContext();\n\n  var _useState = useState(-1),\n      _useState2 = _slicedToArray(_useState, 2),\n      index = _useState2[0],\n      setIndex = _useState2[1];\n\n  var ref = useRef(null);\n  useSafeLayoutEffect(function () {\n    return function () {\n      if (!ref.current) return;\n      descendants.unregister(ref.current);\n    };\n  }, []);\n  useSafeLayoutEffect(function () {\n    if (!ref.current) return;\n    var dataIndex = Number(ref.current.dataset[\"index\"]);\n\n    if (index != dataIndex && !Number.isNaN(dataIndex)) {\n      setIndex(dataIndex);\n    }\n  });\n  var refCallback = options ? cast(descendants.register(options)) : cast(descendants.register);\n  return {\n    descendants: descendants,\n    index: index,\n    enabledIndex: descendants.enabledIndexOf(ref.current),\n    register: mergeRefs(refCallback, ref)\n  };\n}\n\nfunction createDescendantContext() {\n  var ContextProvider = cast(DescendantsContextProvider);\n\n  var _useDescendantsContext = function _useDescendantsContext() {\n    return cast(useDescendantsContext());\n  };\n\n  var _useDescendant = function _useDescendant(options) {\n    return useDescendant(options);\n  };\n\n  var _useDescendants = function _useDescendants() {\n    return useDescendants();\n  };\n\n  return [ContextProvider, _useDescendantsContext, _useDescendants, _useDescendant];\n}\n\nexport { createDescendantContext, createDescendantContext as default };","map":{"version":3,"sources":["/home/dmytro/react-redux-posts/node_modules/@chakra-ui/descendant/dist/index.esm.js"],"names":["createContext","mergeRefs","useRef","useState","useEffect","useLayoutEffect","sortNodes","nodes","sort","a","b","compare","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","Error","isElement","el","nodeType","ELEMENT_NODE","getNextIndex","current","max","loop","next","getPrevIndex","useSafeLayoutEffect","window","cast","value","DescendantsManager","Map","nodeOrOptions","registerNode","node","descendants","delete","sorted","Array","from","keys","assignIndex","clear","forEach","descendant","index","indexOf","dataset","toString","size","enabledValues","length","values","filter","disabled","count","enabledCount","item","enabledItem","lastIndex","_a","get","findIndex","i","isSameNode","enabledIndex","enabledIndexOf","nextEnabledIndex","prev","prevEnabledIndex","options","has","concat","set","useDescendants","destroy","name","errorMessage","DescendantsContextProvider","useDescendantsContext","useDescendant","setIndex","ref","unregister","dataIndex","Number","isNaN","refCallback","register","createDescendantContext","ContextProvider","_useDescendantsContext","_useDescendant","_useDescendants","default"],"mappings":"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","sourcesContent":["// src/use-descendant.ts\nimport { createContext } from \"@chakra-ui/react-context\";\nimport { mergeRefs } from \"@chakra-ui/react-use-merge-refs\";\nimport { useRef, useState } from \"react\";\n\n// src/utils.ts\nimport { useEffect, useLayoutEffect } from \"react\";\nfunction sortNodes(nodes) {\n  return nodes.sort((a, b) => {\n    const compare = a.compareDocumentPosition(b);\n    if (compare & Node.DOCUMENT_POSITION_FOLLOWING || compare & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n      return -1;\n    }\n    if (compare & Node.DOCUMENT_POSITION_PRECEDING || compare & Node.DOCUMENT_POSITION_CONTAINS) {\n      return 1;\n    }\n    if (compare & Node.DOCUMENT_POSITION_DISCONNECTED || compare & Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC) {\n      throw Error(\"Cannot sort the given nodes.\");\n    } else {\n      return 0;\n    }\n  });\n}\nvar isElement = (el) => typeof el == \"object\" && \"nodeType\" in el && el.nodeType === Node.ELEMENT_NODE;\nfunction getNextIndex(current, max, loop) {\n  let next = current + 1;\n  if (loop && next >= max)\n    next = 0;\n  return next;\n}\nfunction getPrevIndex(current, max, loop) {\n  let next = current - 1;\n  if (loop && next < 0)\n    next = max;\n  return next;\n}\nvar useSafeLayoutEffect = typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\nvar cast = (value) => value;\n\n// src/descendant.ts\nvar DescendantsManager = class {\n  descendants = /* @__PURE__ */ new Map();\n  register = (nodeOrOptions) => {\n    if (nodeOrOptions == null)\n      return;\n    if (isElement(nodeOrOptions)) {\n      return this.registerNode(nodeOrOptions);\n    }\n    return (node) => {\n      this.registerNode(node, nodeOrOptions);\n    };\n  };\n  unregister = (node) => {\n    this.descendants.delete(node);\n    const sorted = sortNodes(Array.from(this.descendants.keys()));\n    this.assignIndex(sorted);\n  };\n  destroy = () => {\n    this.descendants.clear();\n  };\n  assignIndex = (descendants) => {\n    this.descendants.forEach((descendant) => {\n      const index = descendants.indexOf(descendant.node);\n      descendant.index = index;\n      descendant.node.dataset[\"index\"] = descendant.index.toString();\n    });\n  };\n  count = () => this.descendants.size;\n  enabledCount = () => this.enabledValues().length;\n  values = () => {\n    const values = Array.from(this.descendants.values());\n    return values.sort((a, b) => a.index - b.index);\n  };\n  enabledValues = () => {\n    return this.values().filter((descendant) => !descendant.disabled);\n  };\n  item = (index) => {\n    if (this.count() === 0)\n      return void 0;\n    return this.values()[index];\n  };\n  enabledItem = (index) => {\n    if (this.enabledCount() === 0)\n      return void 0;\n    return this.enabledValues()[index];\n  };\n  first = () => this.item(0);\n  firstEnabled = () => this.enabledItem(0);\n  last = () => this.item(this.descendants.size - 1);\n  lastEnabled = () => {\n    const lastIndex = this.enabledValues().length - 1;\n    return this.enabledItem(lastIndex);\n  };\n  indexOf = (node) => {\n    var _a;\n    if (!node)\n      return -1;\n    return ((_a = this.descendants.get(node)) == null ? void 0 : _a.index) ?? -1;\n  };\n  enabledIndexOf = (node) => {\n    if (node == null)\n      return -1;\n    return this.enabledValues().findIndex((i) => i.node.isSameNode(node));\n  };\n  next = (index, loop = true) => {\n    const next = getNextIndex(index, this.count(), loop);\n    return this.item(next);\n  };\n  nextEnabled = (index, loop = true) => {\n    const item = this.item(index);\n    if (!item)\n      return;\n    const enabledIndex = this.enabledIndexOf(item.node);\n    const nextEnabledIndex = getNextIndex(enabledIndex, this.enabledCount(), loop);\n    return this.enabledItem(nextEnabledIndex);\n  };\n  prev = (index, loop = true) => {\n    const prev = getPrevIndex(index, this.count() - 1, loop);\n    return this.item(prev);\n  };\n  prevEnabled = (index, loop = true) => {\n    const item = this.item(index);\n    if (!item)\n      return;\n    const enabledIndex = this.enabledIndexOf(item.node);\n    const prevEnabledIndex = getPrevIndex(enabledIndex, this.enabledCount() - 1, loop);\n    return this.enabledItem(prevEnabledIndex);\n  };\n  registerNode = (node, options) => {\n    if (!node || this.descendants.has(node))\n      return;\n    const keys = Array.from(this.descendants.keys()).concat(node);\n    const sorted = sortNodes(keys);\n    if (options == null ? void 0 : options.disabled) {\n      options.disabled = !!options.disabled;\n    }\n    const descendant = { node, index: -1, ...options };\n    this.descendants.set(node, descendant);\n    this.assignIndex(sorted);\n  };\n};\n\n// src/use-descendant.ts\nfunction useDescendants() {\n  const descendants = useRef(new DescendantsManager());\n  useSafeLayoutEffect(() => {\n    return () => descendants.current.destroy();\n  });\n  return descendants.current;\n}\nvar [DescendantsContextProvider, useDescendantsContext] = createContext({\n  name: \"DescendantsProvider\",\n  errorMessage: \"useDescendantsContext must be used within DescendantsProvider\"\n});\nfunction useDescendant(options) {\n  const descendants = useDescendantsContext();\n  const [index, setIndex] = useState(-1);\n  const ref = useRef(null);\n  useSafeLayoutEffect(() => {\n    return () => {\n      if (!ref.current)\n        return;\n      descendants.unregister(ref.current);\n    };\n  }, []);\n  useSafeLayoutEffect(() => {\n    if (!ref.current)\n      return;\n    const dataIndex = Number(ref.current.dataset[\"index\"]);\n    if (index != dataIndex && !Number.isNaN(dataIndex)) {\n      setIndex(dataIndex);\n    }\n  });\n  const refCallback = options ? cast(descendants.register(options)) : cast(descendants.register);\n  return {\n    descendants,\n    index,\n    enabledIndex: descendants.enabledIndexOf(ref.current),\n    register: mergeRefs(refCallback, ref)\n  };\n}\nfunction createDescendantContext() {\n  const ContextProvider = cast(DescendantsContextProvider);\n  const _useDescendantsContext = () => cast(useDescendantsContext());\n  const _useDescendant = (options) => useDescendant(options);\n  const _useDescendants = () => useDescendants();\n  return [\n    ContextProvider,\n    _useDescendantsContext,\n    _useDescendants,\n    _useDescendant\n  ];\n}\nexport {\n  createDescendantContext,\n  createDescendantContext as default\n};\n"]},"metadata":{},"sourceType":"module"}